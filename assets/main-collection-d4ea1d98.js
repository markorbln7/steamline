var ht=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(ht(s,t,"read from private field"),e?e.call(s):t.get(s)),h=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},M=(s,t,e,r)=>(ht(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);const mt=(s,t=[])=>{const e=[];for(const[r,g]of s){const m=t.some(x=>x.key===r&&x.value===g);(g===""||m)&&e.push(r)}return e.forEach(r=>s.delete(r)),s.toString()},vt=(s,t=250)=>{let e;return(...r)=>{clearTimeout(e),e=setTimeout(()=>{e=null,s(...r)},t)}};var gt=":host{display:inline-block;margin:2px;width:129px;-webkit-tap-highlight-color:transparent;--0: var(--track-height, 0.5rem);--1: var(--thumb-diameter, 1rem);--2: var(--track-color, rgb(239, 239, 239));--3: var(--track-color-active, rgb(229, 229, 229));--4: var(--2);--5: var(--3);--6: var(--track-color-disabled, rgb(250, 250, 250));--7: var(--progress-color, rgb(0, 117, 255));--8: var(--progress-color-active, rgb(0, 92, 200));--9: var(--progress-color-disabled, rgb(203, 203, 203));--a: var(--thumb-color, rgb(0, 117, 255));--b: var(--thumb-color-active, rgb(0, 92, 200));--c: var(--thumb-color-disabled, rgb(203, 203, 203));--d: var(--thumb-halo-color, rgba(0, 92, 200, 0.1));--e: var(--thumb-halo-size, 0.425rem);--f: var(--focus-outline, 1px solid black);--g: var(--focus-outline-offset, 0px);--h: var(--transition-duration, 100ms);--i: var(--transition-timing-function, ease-in);--j: pointer;--k: all}:host([disabled]){--j: default;pointer-events:none;--k: none;--2: var(--6);--7: var(--9);--a: var(--c)}[part=container]{display:grid;width:100%;cursor:var(--j)}@media(hover: hover){[part=container]:hover [data-input=min]{--7: var(--3)}[part=container]:hover [data-input=max]{--2: var(--3);--7: var(--8)}}[part=container]:focus-within [data-input=min]{--7: var(--3)}[part=container]:focus-within [data-input=max]{--2: var(--3);--7: var(--8)}input[type=range]{grid-area:1/1;margin:0;padding:0;width:100%;height:var(--1);max-width:100%;background:transparent;font:1em/1 arial,sans-serif;outline:none;cursor:var(--j);pointer-events:none;--range: calc(var(--max) - var(--min));--ratio: calc((var(--value) - var(--min)) / var(--range));--fill-width: calc(0.5 * var(--1) + var(--ratio) * (100% - var(--1)))}input[type=range],input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}@media(hover: hover){input[type=range]:focus:not(:hover){outline:var(--f);outline-offset:var(--g)}}input[type=range]::-webkit-slider-runnable-track{box-sizing:border-box;border:none;width:100%;height:var(--0);background:var(--2);border-radius:calc(var(--0)/2);background:linear-gradient(var(--7), var(--7)) 0/var(--fill-width) 100% no-repeat var(--2)}input[type=range]::-moz-range-track{box-sizing:border-box;border:none;width:100%;height:var(--0);background:var(--2);border-radius:calc(var(--0)/2)}input[type=range]::-moz-range-progress{height:var(--0);background:var(--7);border-radius:calc(var(--0)/2)}input[type=range][data-input=min]::-moz-range-progress{border-top-right-radius:0px;border-bottom-right-radius:0px}input[type=range]::-webkit-slider-thumb{margin-top:calc(.5*(var(--0) - var(--1)));box-sizing:border-box;border:none;width:var(--1);height:var(--1);border-radius:50%;background:var(--a);box-shadow:var(--thumb-shadow);transition:all var(--h) var(--i);pointer-events:var(--k)}@media(hover: hover){input[type=range]::-webkit-slider-thumb:hover{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}}input[type=range]::-moz-range-thumb{box-sizing:border-box;border:none;width:var(--1);height:var(--1);border-radius:50%;background:var(--a);box-shadow:var(--thumb-shadow);transition:all var(--h) var(--i);pointer-events:var(--k)}@media(hover: hover){input[type=range]::-moz-range-thumb:hover{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}}input[type=range]:focus::-webkit-slider-thumb{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}input[type=range]:focus::-moz-range-thumb{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}input[type=range][data-input=min]{z-index:2;--7: var(--4);--2: transparent}input[type=range][data-input=max][data-at-min=true]{z-index:2}",I,_,D,$,z,F,V,T,S,L,j,K,p,G,C,U,Y,W,pt;customElements.define("range-slider",(pt=class extends HTMLElement{constructor(){super();h(this,I,void 0);h(this,_,void 0);h(this,D,void 0);h(this,$,void 0);h(this,z,void 0);h(this,F,void 0);h(this,V,void 0);h(this,T,void 0);h(this,S,void 0);h(this,L,void 0);h(this,j,void 0);h(this,K,()=>{M(this,T,this.shadowRoot.querySelector('[part="container"]')),M(this,S,this.shadowRoot.querySelector('[data-input="min"]')),M(this,L,this.shadowRoot.querySelector('[data-input="max"]')),M(this,j,[i(this,S),i(this,L)]);let t=this.getAttribute("min"),e=this.getAttribute("max");if(!t||!e){this.shadowRoot.innerHTML="";return}if(this.min=Number(t),this.max=Number(e),isNaN(this.min)||isNaN(this.max)){this.shadowRoot.innerHTML="";return}let r=this.getAttribute("valueMin"),g=this.getAttribute("valueMax"),m=this.getAttribute("step"),x=Number(r),c=Number(g),a=Number(m);this.valueMin=r&&!isNaN(x)?x:this.min,this.valueMax=g&&!isNaN(c)?c:this.max,this.step=m&&!isNaN(a)?a:1,this.midpoint=(this.valueMax-this.valueMin)/2+this.valueMin;let P=this.getAttribute("disabled"),y=P===""||P==="true";this.disabled=y,i(this,j).forEach((d,f)=>{i(this,p).call(this,d,"min",this.min),i(this,p).call(this,d,"max",this.max),i(this,p).call(this,d,"step",this.step),i(this,p).call(this,d,"value",f===0?this.valueMin:this.valueMax),d.addEventListener("change",i(this,G)),d.addEventListener("input",i(this,G)),d.addEventListener("touchstart",i(this,Y))}),i(this,T).addEventListener("mousedown",i(this,U)),i(this,T).addEventListener("click",i(this,U)),this.addEventListener("mouseup",i(this,W)),this.addEventListener("touchend",i(this,W)),this.ready=!0,this.dispatchEvent(new CustomEvent("ready",{detail:this.current}))});h(this,p,(t,e,r)=>{t[e]=r;let g=e==="value"?t.valueAsNumber:r;t.style.setProperty(`--${e}`,g),t.dataset.input==="max"&&e==="value"&&(t.dataset.atMin=r===this.min)});h(this,G,t=>{t.stopPropagation();let e=t.target,r=e.dataset.input==="min",g=e.valueAsNumber,m=r?Math.min(g,this.valueMax):Math.max(g,this.valueMin);i(this,p).call(this,e,"value",m);let x={min:this.min,max:this.max,step:this.step,valueMin:r?m:this.valueMin,valueMax:r?this.valueMax:m};this.dispatchEvent(new CustomEvent("input",{detail:x})),t.type==="change"&&(i(this,p).call(this,e,"value",m),r?this.valueMin=m:this.valueMax=m)});h(this,C,!1);h(this,U,t=>{if(t.button!==0)return;if(t.stopPropagation(),t.type==="click"&&i(this,C)){M(this,C,!1);return}t.type==="mousedown"&&M(this,C,!0);let e=(t.offsetX===0&&t.offsetY===0?t.layerX-t.target.offsetLeft:t.offsetX)/t.target.offsetWidth,r=(this.midpoint-this.min)/(this.max-this.min),g=e*(this.max-this.min)+this.min,m=e<r,x=m?i(this,S):i(this,L);i(this,p).call(this,x,"value",g);let c={min:this.min,max:this.max,step:this.step,valueMin:m?x.valueAsNumber:this.valueMin,valueMax:m?this.valueMax:x.valueAsNumber};this.dispatchEvent(new CustomEvent("input",{detail:c}))});h(this,Y,t=>{let e=t.path?t.path:t.composedPath();!Array.isArray(e)||Array.length<1||e[0].focus()});h(this,W,t=>{this.blur(),i(this,S).blur(),i(this,L).blur(),this.valueMin=i(this,S).valueAsNumber,this.valueMax=i(this,L).valueAsNumber});let t=this.attachShadow({mode:"open"}),e=document.createElement("template");e.innerHTML='<div part="container"><input type="range" data-input="min"><input type="range" data-input="max"></div>';let r=document.createElement("style");r.innerHTML=gt,t.appendChild(r),t.appendChild(e.content.cloneNode(!0))}static get observedAttributes(){return["disabled"]}get min(){return i(this,I)}set min(t){let e=Number(t);M(this,I,e),this.setAttribute("min",e),i(this,p).call(this,i(this,S),"min",e),i(this,p).call(this,i(this,L),"min",e)}get max(){return i(this,_)}set max(t){let e=Number(t);M(this,_,e),this.setAttribute("max",e),i(this,p).call(this,i(this,S),"max",e),i(this,p).call(this,i(this,L),"max",e)}get step(){return i(this,D)}set step(t){M(this,D,t),this.setAttribute("step",t),i(this,p).call(this,i(this,S),"step",t),i(this,p).call(this,i(this,L),"step",t)}get disabled(){return i(this,$)}set disabled(t){if(typeof t=="boolean")if(M(this,$,t),i(this,S).disabled=t,i(this,L).disabled=t,t===!0){let e=this.getAttribute("disabled");e!==""&&e!=="true"&&this.setAttribute("disabled","")}else this.removeAttribute("disabled")}get valueMin(){return i(this,z)}set valueMin(t){let e=Number(t);e!==this.valueMin&&(e<this.min&&(e=this.min),M(this,z,e),this.setAttribute("valueMin",e),i(this,p).call(this,i(this,S),"value",e),this.midpoint=(this.valueMax-this.valueMin)/2+this.valueMin,this.ready&&this.dispatchEvent(new CustomEvent("change",{detail:this.current})))}get valueMax(){return i(this,F)}set valueMax(t){let e=Number(t);e!==this.valueMax&&(e>this.max&&(e=this.max),M(this,F,e),this.setAttribute("valueMax",e),i(this,p).call(this,i(this,L),"value",e),this.midpoint=(this.valueMax-this.valueMin)/2+this.valueMin,this.ready&&this.dispatchEvent(new CustomEvent("change",{detail:this.current})))}get midpoint(){return i(this,V)}set midpoint(t){M(this,V,Number(t))}get current(){return{min:this.min,max:this.max,step:this.step,valueMin:this.valueMin,valueMax:this.valueMax}}connectedCallback(){!this.isConnected||i(this,K).call(this)}attributeChangedCallback(t,e,r){if(!(!this.isConnected||!this.ready)&&t==="disabled"){let g=r===""||r==="true";this.disabled=g}}},I=new WeakMap,_=new WeakMap,D=new WeakMap,$=new WeakMap,z=new WeakMap,F=new WeakMap,V=new WeakMap,T=new WeakMap,S=new WeakMap,L=new WeakMap,j=new WeakMap,K=new WeakMap,p=new WeakMap,G=new WeakMap,C=new WeakMap,U=new WeakMap,Y=new WeakMap,W=new WeakMap,pt));class xt extends window.HTMLElement{constructor(){super(),this.container=this,this.init()}init(){const t={productCard:".product-card",collectionNavbar:"[data-collection-navbar]",pagination:"[data-collection-pagination]",filterToggle:"[data-collection-filter-toggle]",filterDrawer:"[data-collection-filter-drawer]",filterContent:"[data-collection-filter-content]",filterClearLink:"[data-collection-filter-clear-link]",filterPriceRangeSlider:"[data-collection-filter-price-range-slider]",filterPriceRangeMin:"[data-collection-filter-price-range-min]",filterPriceRangeMax:"[data-collection-filter-price-range-max]",layoutSwitchButton:"[data-collection-layout-switch]",collectionWrapper:".collection__wrapper",collectionGrid:".collection-grid",currentItems:".collection-grid .product-card",loadMoreBtnTextNext:'[data-infinite-load="next"] [data-infinite-load-text]',loadMoreBtnTextPrev:'[data-infinite-load="prev"] [data-infinite-load-text]',loadMoreAnimNext:'[data-infinite-load="next"] [data-infinite-load-animation]',loadMoreAnimPrev:'[data-infinite-load="prev"] [data-infinite-load-animation]',newHtmlLoadNextButton:'[data-infinite-scroll="next"]',newHtmlLoadPrevButton:'[data-infinite-scroll="prev"]',newLoadNextButtonHtml:'[data-infinite-scroll="next-parent"]',newLoadPrevButtonHtml:'[data-infinite-scroll="prev-parent"]',infiniteScrollContainer:"[data-infinite-scroll-content]",collectionListItemsHtml:"[data-infinite-scroll-content] .collection-grid",viewedCounts:"[data-infinite-viewed-count]",scrollProgressIndicators:"[data-infinite-scroll-progress]",infiniteLoadBtns:"[data-infinite-load]",collectionSort:"[data-collection-sort]",viewMoreButton:'[data-infinite-load="next"]'},e={isHidden:"is-hidden",isVisible:"is-visible",isSelected:"is-selected",filterIsVisible:"filter-is-visible"};this.defaultSortBy=this.container.dataset.defaultSortBy||"manual",this.collectionNavbar=this.container.querySelector(t.collectionNavbar),this.collectionGrid=this.container.querySelector(t.collectionGrid),(()=>{if(this.collectionNavbar=this.container.querySelector(t.collectionNavbar),!this.collectionNavbar||!this.collectionGrid)return;const c=this.container.querySelector(t.filterDrawer),a=this.container.querySelector(t.filterContent),P=this.container.querySelector(t.mobileFilters),y=this.container.querySelectorAll(t.pagination),d=this.container.querySelector(t.viewMoreButton),f=async n=>{const l=`${window.location.pathname}?section_id=${window.infiniteScrollSectionId}&${n}`;try{const o=await fetch(l);if(!o.ok)throw new Error(`Fetch "${this.id}" section response was not OK`);const b=await o.text(),w=new DOMParser().parseFromString(b,"text/html");this.collectionGrid.innerHTML=w.querySelector(t.collectionGrid).innerHTML,a&&(a.innerHTML=w.querySelector(t.filterContent).innerHTML),P&&(P.innerHTML=w.querySelector(t.mobileFilters).innerHTML);const u=w.querySelectorAll(t.pagination);y.length>0&&u.length>0&&y.forEach((v,q)=>{const H=u[q];H&&(v.innerHTML=H.innerHTML)}),history.replaceState({searchParams:n},"",`${window.location.pathname}${n?"?".concat(n):""}`),g(),m(),Q()}catch(o){window.console.error(o)}},N=n=>{n.preventDefault();const l=new FormData(n.target.closest("form")),o=new URLSearchParams(l),b=new URLSearchParams(window.location.search);if(b.has("sort_by")){const H=b.get("sort_by");o.append("sort_by",H)}const w=[{key:"sort_by",value:this.defaultSortBy}],u=this.container.querySelector(t.filterPriceRangeMin);u&&w.push({key:u.name,value:u.min});const v=this.container.querySelector(t.filterPriceRangeMax);v&&w.push({key:v.name,value:v.max});const q=mt(o,w);f(q).then(()=>{d&&d.classList.add(e.isHidden)})},B=vt(n=>{N(n)},500);this.collectionNavbar.addEventListener("input",B),this.collectionNavbar.addEventListener("submit",N);const A=()=>{window.innerWidth<=768?c.classList.add(e.isHidden):(c.classList.remove(e.isHidden),c.classList.remove(e.isVisible))};A();const J=vt(A,250);window.addEventListener("resize",J);const k=n=>{n.preventDefault(),n.stopPropagation();const l=c.classList.contains(e.isHidden);c.classList.toggle(e.isHidden,!l),c.classList.toggle(e.isVisible,l),c.setAttribute("aria-hidden",!l.toString()),document.body.classList.toggle(e.filterIsVisible,l),document.body.classList.toggle("scroll-lock",l);const o=document.querySelector(".fader--filter-modal"),b=o.classList.contains("is-visible");o.classList.toggle("is-visible",!b),o.classList.toggle("overlay--show",!b),b||o.addEventListener("click",k,{once:!0})},Q=()=>{this.container.querySelector(t.filterDrawer),this.container.querySelectorAll(t.filterToggle).forEach(l=>{l.removeEventListener("click",k),l.addEventListener("click",k)})};if(this.container.querySelectorAll(t.filterToggle).forEach(n=>{n.removeEventListener("click",k),n.addEventListener("click",k)}),a){const n=l=>{const o=l.target.closest(t.filterClearLink);if(!o)return;l.preventDefault();const b=o.href.split("?")[1]??"";f(b).then(()=>{this.container.querySelectorAll(t.viewMoreButton).forEach(u=>u.remove()),d&&d.classList.remove(e.isHidden)})};a.addEventListener("click",n)}this.container.querySelectorAll(t.collectionSort).forEach(n=>{n.addEventListener("change",l=>{l.preventDefault();const o=new URLSearchParams(window.location.search);o.has("sort_by")&&o.delete("sort_by");const b=l.target.value;o.append("sort_by",b);const w=[{key:"sort_by",value:this.defaultSortBy}],u=this.container.querySelector(t.filterPriceRangeMin);u&&w.push({key:u.name,value:u.min});const v=this.container.querySelector(t.filterPriceRangeMax);v&&w.push({key:v.name,value:v.max});const q=mt(o,w);f(q).then(()=>{d&&d.classList.add(e.isHidden)})})})})();const g=()=>{const c=this.container.querySelector(t.filterPriceRangeSlider),a=this.container.querySelector(t.filterPriceRangeMin),P=this.container.querySelector(t.filterPriceRangeMax);!c||!a||!P||(c.addEventListener("input",y=>{const{valueMin:d,valueMax:f}=y.detail;a.value=d,P.value=f}),c.addEventListener("change",()=>{if(this.collectionNavbar.requestSubmit)return this.collectionNavbar.requestSubmit();const y=this.collectionNavbar.querySelector('[type="submit"]');y&&y.click()}))};g();const m=()=>{this.container.querySelectorAll(".collection-filter__accordion").forEach(a=>{const P=a.querySelectorAll(".filter-accordion__trigger"),y=a.querySelectorAll(".filter-accordion__panel");P.forEach(f=>{f.setAttribute("aria-expanded",!0)}),y.forEach(f=>{f.classList.add("show-panel")});const d=f=>{const N=f.target.closest(".filter-accordion__trigger");if(!N)return;const B=N.getAttribute("aria-controls"),A=a.querySelector(`#${B}`);N.getAttribute("aria-expanded")==="true"?(N.setAttribute("aria-expanded",!1),A.classList.remove("show-panel")):(N.setAttribute("aria-expanded",!0),A.classList.add("show-panel"))};a.addEventListener("click",d)})};m();const x=()=>{const c=a=>{const P=a.dataset.infiniteLoad==="next",y=a.dataset.loadPage,f=new URLSearchParams(window.location.search).get("page")||1,N=Number(f),B=this.container.dataset.totalCollectionPages,A=Number(B),J=this.container.dataset.itemsPerPage,k=Number(J);if(isNaN(N)){console.error("Current page number is not a valid number");return}const Q=`https://${window.theme.locale.shopDomain}/collections/${window.infiniteScrollHandle}?page=${y}&section_id=${window.infiniteScrollSectionId}`;async function rt(nt,n,l){const o=n?document.querySelector(t.loadMoreBtnTextNext):document.querySelector(t.loadMoreBtnTextPrev),b=n?document.querySelector(t.loadMoreAnimNext):document.querySelector(t.loadMoreAnimPrev);o&&b&&(o.classList.add("hide"),b.classList.remove("hide"));const w=u=>{const v=new DOMParser().parseFromString(u,"text/html"),q=document.querySelector(t.newHtmlLoadPrevButton),H=document.querySelector(t.newHtmlLoadNextButton),at=v.body.querySelector(t.newHtmlLoadNextButton),ot=v.body.querySelector(t.newHtmlLoadPrevButton),st=v.body.querySelector(t.newLoadNextButtonHtml),lt=v.body.querySelector(t.newLoadPrevButtonHtml),Z=document.querySelector(t.infiniteScrollContainer);if(n&&ot?ot.remove():!n&&at&&at.remove(),!v.querySelector(t.collectionWrapper).innerHTML){console.error("No new HTML content found to insert into the page.");return}const tt=v.querySelector(t.collectionListItemsHtml).innerHTML;if(!tt){console.error("No new list items found to add to the collection grid.");return}const et=document.querySelectorAll(t.collectionWrapper);if(!et){console.error("No section mounts found to insert new HTML content.");return}const O=et[et.length-1].querySelector(t.collectionGrid);n?(O&&(O.insertAdjacentHTML("beforeend",tt),H&&H.remove()),st&&Z.insertAdjacentHTML("beforeend",st.innerHTML)):(O&&(O.insertAdjacentHTML("afterbegin",tt),q&&q.remove()),lt&&Z&&Z.insertAdjacentHTML("afterbegin",lt.innerHTML)),x();const it=document.querySelectorAll(t.currentItems),ct=document.querySelectorAll(t.viewedCounts),R=Number(l);if(!it||!ct){console.error("Failed to update current item counts or scroll progress indicators.");return}let E=N*k;R<N?R===1?E=it.length:E=(R-1)*k+it.length:R===A?E=window.infiniteScrollItemCount:E=R*k,ct.forEach(X=>{X.innerText=isNaN(E)?0:E});const dt=document.querySelectorAll(t.scrollProgressIndicators);if(!dt){console.error("No scroll progress indicators found.");return}dt.forEach(X=>{X.style.width=`${E/window.infiniteScrollItemCount*100}%`});const ut=new URLSearchParams(window.location.search);ut.set("page",l),window.history.replaceState({},"",`${window.location.pathname}?${ut}`)};try{const u=await fetch(nt);if(!u.ok)throw new Error("Network response was not ok");const v=await u.text();w(v)}catch(u){return window.console.error("Could not fetch collection section",u),null}}rt(Q,P,y)};this.infiniteScrollInitialised||(document.querySelector(t.infiniteScrollContainer).addEventListener("click",a=>{a.target.closest(t.infiniteLoadBtns)&&(a.preventDefault(),a.stopPropagation(),c(a.target.closest(t.infiniteLoadBtns)))}),this.infiniteScrollInitialised=!0)};x()}}export{xt as default};
